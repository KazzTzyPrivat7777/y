<!-- KazzTzy -->

<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Z4Z Load Tester</title>
<style>
body{
    background:#0f172a;
    font-family:Arial, sans-serif;
    color:white;
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
}
.card{
    background:#111827;
    padding:30px;
    border-radius:15px;
    width:420px;
}
input{
    width:100%;
    padding:10px;
    margin:8px 0;
    border:none;
    border-radius:8px;
}
button{
    width:100%;
    padding:12px;
    border:none;
    border-radius:8px;
    background:#2563eb;
    color:white;
    font-weight:bold;
    cursor:pointer;
    margin-top:8px;
}
button:hover{ background:#1d4ed8; }
.stop{ background:#dc2626; }
.progress{
    height:15px;
    background:#1f2937;
    border-radius:8px;
    margin-top:10px;
    overflow:hidden;
}
.bar{
    height:100%;
    width:0%;
    background:#22c55e;
}
.result{
    margin-top:12px;
    font-size:14px;
}
</style>
</head>
<body>

<div class="card">
    <h2>Z4Z API Load Tester</h2>

    <input type="text" id="url" placeholder="Masukkan URL API (GET)">
    <input type="number" id="jumlah" placeholder="Jumlah Request (max 100)">
    <input type="number" id="delay" placeholder="Delay (ms)">

    <button onclick="startTest()">Start Test</button>
    <button class="stop" onclick="stopTest()">Stop</button>

    <div class="progress"><div class="bar" id="bar"></div></div>

    <div class="result" id="result"></div>
</div>

<script>
let stopFlag = false;

async function startTest(){
    stopFlag = false;

    const url = document.getElementById("url").value;
    const jumlahInput = parseInt(document.getElementById("jumlah").value);
    const delay = parseInt(document.getElementById("delay").value);
    const resultBox = document.getElementById("result");
    const bar = document.getElementById("bar");

    if(!url || !jumlahInput || !delay){
        resultBox.innerHTML = "Isi semua field dulu.";
        return;
    }

    const jumlah = Math.min(jumlahInput, 100);

    let success = 0;
    let failed = 0;

    resultBox.innerHTML = "Starting test...<br>";
    bar.style.width = "0%";

    for(let i=1;i<=jumlah;i++){
        if(stopFlag) break;

        try{
            const res = await fetch(url);
            if(res.ok){
                success++;
                resultBox.innerHTML += `Request ${i} ✅<br>`;
            }else{
                failed++;
                resultBox.innerHTML += `Request ${i} ❌ (${res.status})<br>`;
            }
        }catch(e){
            failed++;
            resultBox.innerHTML += `Request ${i} ❌ Error<br>`;
        }

        bar.style.width = ((i/jumlah)*100) + "%";
        resultBox.scrollTop = resultBox.scrollHeight;

        await new Promise(r=>setTimeout(r, delay));
    }

    resultBox.innerHTML += `<br>Done.<br>Success: ${success}<br>Failed: ${failed}`;
}

function stopTest(){
    stopFlag = true;
}
</script>

</body>
</html>

<!-- /KazzTzy -->